## 用户体验与导航
- 登录成功后跳转到“平台选择页”，展示当前用户拥有的平台卡片
- 无平台权限：在平台选择页中心显示提示文案：`您当前没有购买任何平台的服务`
- 多平台权限：可点选任意平台卡片，进入“平台操作页”
- 平台操作页：仅展示该平台下授权的功能按钮（发布、自动运营）；顶部加入“返回”按钮返回平台选择页
- 返回按钮放置：应用窗口左上角，平台选择页和平台操作页均显示；登录页不显示

## 主进程（后端）改造
- IPC 接口：
  1. `login(username, password)`：成功返回 `{ ok:true, userId }`（保留过期校验）
  2. `getUserPlatforms(userId)`：返回用户授权的平台数组（`[{ code, name }]`）
  3. `getPlatformFeatures(userId, platformCode)`：返回用户在该平台授权的功能数组（`[{ code, name }]`）
  4. `openPlatform(platformCode)`：打开窗口并跳转平台主页（xhs/douyin/ks/mp 映射）
- 安全与校验：仅在登录成功后允许查询授权；无授权返回空数组

## 预加载桥接
- 在 `src/preload.js` 暴露：
  - `login(username, password)`
  - `getUserPlatforms(userId)`
  - `getPlatformFeatures(userId, platformCode)`
  - `openPlatform(platformCode)`
- 使用 `contextBridge` 将 API 注入渲染进程

## 前端页面结构
- `src/index.html`：三种视图的容器结构
  - 登录视图：保留现有登录表单
  - 平台选择视图：卡片列表 + 空态提示（无平台） + 顶部返回按钮（返回登录）
  - 平台操作视图：功能按钮列表 + 顶部返回按钮（返回平台选择）
- 样式：返回按钮固定左上角；平台卡片与功能按钮保持一致风格

## 渲染逻辑（src/renderer.js）
- 应用状态：`state = { userId, currentView, selectedPlatform }`
- 事件流：
  1. 登录成功 → `state.userId` 赋值 → `currentView = 'platforms'` → 加载平台列表
  2. 平台选择 → `selectedPlatform = code` → `currentView = 'operations'` → 加载功能列表
  3. 返回按钮：
     - operations → platforms（清空已加载功能）
     - platforms → login（清空用户会话）
- 数据加载：
  - 平台列表：`getUserPlatforms(userId)`；空数组则渲染空态提示文案
  - 功能列表：`getPlatformFeatures(userId, selectedPlatform)`；渲染功能按钮
- 交互：点击功能按钮可先调用 `openPlatform(selectedPlatform)` 打开对应平台窗口；后续可在页面内扩展具体操作

## 平台 URL 映射（主进程）
- `xhs → https://www.xiaohongshu.com/`
- `douyin → https://www.douyin.com/`
- `ks → https://www.kuaishou.com/`
- `mp → https://mp.weixin.qq.com/`

## 授权与数据准备
- 已创建账户：`xhs_user/pass123`（平台 xhs，功能 publish/auto_operation）；`douyin_user/pass123`（平台 douyin，功能 publish）
- 如需为 `douyin_user` 增加自动运营：`U=douyin_user PLAT=douyin FEAT=auto_operation npm run grant:feature`

## 验收标准
- 登录 `xhs_user`：平台选择页仅显示“小红书”；进入后只有“发布/自动运营”按钮
- 登录 `douyin_user`：平台选择页仅显示“抖音”；进入后显示“发布”按钮（若授予自动运营则同时显示）
- 无平台授权的用户：登录后看到空态提示文案
- 返回按钮可在平台操作页返回平台选择页，在平台选择页返回登录页

## 代码改动点
- `src/main.js`：新增/完善 IPC 接口与平台 URL 映射
- `src/preload.js`：暴露新 API
- `src/index.html`：三视图结构与返回按钮
- `src/renderer.js`：状态管理与视图切换、数据加载与渲染

请确认，我将按以上方案开始实现，更新前端页面并联调授权逻辑。