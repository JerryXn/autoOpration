## 问题定位
- 受限页未被队列检测与回退：在增量执行流程中，`open_item` 阶段没有执行受限检测，导致进入 404/受限页后仍推进到 `browse_detail`，流程卡住。代码位置：`src/main.js:532-539` 的本地 `buildQueue` 未包含 `detect_restricted`、`back_to_list`、`open_next_item`。而后续状态机却会跳转到这些阶段：`src/main.js:553-555`。
- 现象复现：Terminal#930-1049 显示 `[autoop-step] stage:"open_item" action:"wait" result:"ok"` 后地址为 404，并且没有“回退/选择下一候选”的行为日志。

## 修复方案
- 统一 `buildQueue`：删除 `autoop-next` 中的本地 `buildQueue`（`src/main.js:532-539`），复用上方完整版本（`src/main.js:150-158`）。
- 队列补全与一致化：
  - `open_item` 阶段：队列为 `[{type:'program_click'},{type:'wait',ms:1200},{type:'detect_restricted'}]`（参考 `src/main.js:155`）。
  - 新增 `back_to_list` 阶段：`[{type:'program_back'},{type:'wait',ms:1200}]`（参考 `src/main.js:156`）。
  - 新增 `open_next_item` 阶段：`[{type:'query_selector_next'},{type:'move_to'},{type:'hover',ms:100},{type:'click',button:'left'},{type:'wait',ms:1200}]`（参考 `src/main.js:157`）。
- 状态机保持：`src/main.js:549-555` 的阶段切换逻辑无需改动；但由于 `st.restricted` 将在 `open_item` 阶段被正确设置，`open_item → back_to_list → open_next_item` 将可用。
- 日志与可视化：保持 `autoop-plan-preview` 推送，便于在 UI 侧观察阶段与选择器；确保回退与下一候选点击也有日志（已有 `logStep`）。

## 兼容性与副作用
- 无数据库结构变更；仅流程与队列定义修复。
- 对外页面的 `TypeError: ... .config` 属站点自有脚本报错，继续以 `[autoop]` 转发即可；不阻断流程。
- Electron 安全告警为开发态提示，不影响功能；如需后续优化可单独加 CSP。

## 验证计划
- 启动应用，执行一次搜索与打开操作：
  - 当首个候选进入 404/受限页时，应自动回退到列表并点击下一候选；日志显示 `detect_restricted → program_back → query_selector_next → click`。
  - 在正常详情页完成滚动与采集后，回到列表并继续下一条。
- 静态验证：搜索 `autoop-next` 流程中仅保留一个 `buildQueue` 定义；`grep 'query_selector_next|program_back|detect_restricted'` 在 `perform` 中可命中。