## 目标
- 确认前端勾选“点赞/收藏”是否正确传到后端运行
- 在打开详情页时确实执行点赞/收藏点击
- 为每一步加入明确日志与可验证证据（终端输出、截图、数据库记录）

## 验证链路
- 前端 → 主进程
  - 检查 `src/views/autoop.js` 构造的 `payload.actions`（like/fav）和调用 `services.ipc.startAutoOp(payload)`
  - 检查 `src/main.js` 在 `start-auto-op` 中是否据此追加 `--like`、`--fav`，以及权限拦截（canLike/canFav）
  - 在控制台打印：最终 `args`、`perms`、`actions`、`filters`
- 主进程 → Python
  - 在 Python 启动后打印解析到的 `DO_LIKE`、`DO_FAV`、`ACTION_USER_ID`
  - 打印开启分页/非分页分支，以及每条 note 的 `note_id`

## 详情页动作日志
- 在打开详情页时：
  - 打印当前页 `url` 与 `note_id`
  - 点赞：打印每个候选选择器的 `locator.count()`，被点击的选择器名，点击结果与前后计数
  - 收藏：同上
  - 每次动作后保存截图到 `artifacts/` 并打印路径

## 数据库验证
- 记录动作到 `op_action_logs`（action/status/page_url），并（可选）更新 `op_interactions.is_liked/is_collected`
- 提供查询语句，执行后返回最新 20 条记录，便于确认动作确实落库

## 故障兜底
- 若选择器计数始终为 0：
  - 打印页面 HTML 片段和 `document.querySelectorAll('*')` 中包含 `like/collect` 关键字的元素 class 列表
  - 临时启用更宽松选择器（如 `button:has-text("赞")`、`button:has-text("收藏")`、`[aria-label*="赞"], [aria-label*="收藏"]`）并重试

## 交付内容
- 在主进程与 Python 中插入上述日志
- 为点赞/收藏动作输出截图与 DB 落库
- 提供查询与运行指令（包含 npm 启动与 Python 日志筛选命令）

## 运行指引
- 启动应用：`npm start`
- 在界面勾选“点赞/收藏”，点击“执行”，查看终端是否出现：
  - `[start-auto-op] args` 含 `--like --fav`
  - `xhs_main action like/collect` 相关日志（包含选择器计数、点击结果、截图路径）
  - DB 写入成功日志或查询结果