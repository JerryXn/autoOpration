## 目标
- 在自动发布视图中，展示已上传图片的缩略图网格（文件名、大小）。
- 支持对任意图片进行替换（保持引用不丢失），并可删除与增补图片。
- 缩略图与 Excel/飞书解析的匹配状态实时联动更新。

## 页面与交互
- 新增“已上传图片”区域（缩略图网格）：每项显示
  - 缩略图（使用 `URL.createObjectURL(file)`）
  - 逻辑文件名（用于匹配，默认等于上传文件名）
  - 物理文件名（实际文件名，如果替换时不同，可同时显示）
  - 操作按钮：`替换`、`删除`
- 替换流程
  - 点击 `替换` 弹出文件选择，选择新图片后：
    - 默认保持“逻辑文件名”不变（保证 Excel 引用不丢失），更新文件对象与缩略图。
    - 提供可选“更新引用为新文件名”的二次操作：将 Excel 中旧文件名替换为新文件名（谨慎提示）。
- 删除流程
  - 删除后从图片集合移除，预览表格即时标注缺失项。

## 数据结构与同步
- 调整图片集合结构：`imagesMap: Map<logicalName, { file, physicalName, url }>`
  - logicalName：匹配用的键（默认 `file.name.toLowerCase()`，URL→basename）
  - physicalName：实际文件名，仅展示用途
  - url：`URL.createObjectURL(file)` 缩略图地址，替换/删除时调用 `URL.revokeObjectURL`
- 解析与匹配：
  - `rebuildPreview()` 使用 `imagesMap` 的键集（logicalName）做匹配检查。
  - 替换保持键不变时，不影响任何行的匹配；若选择“更新引用为新文件名”，对解析数据执行文本替换并重建预览。

## 技术实现
- 视图：`src/views/autopublish.js`
  - 在 Excel 面板下新增缩略图容器 `#image-preview-grid`，渲染 `imagesMap`。
  - 绑定替换与删除事件；替换时：更新 `imagesMap` 当前项 `{ file, physicalName, url }` 并调用 `rebuildPreview()`。
  - 删除时：`imagesMap.delete(logicalName)` 并重建预览。
- 工具：`src/utils/images.js`
  - 扩展工具：`toLogicalName(fileOrString)`（含 URL→basename），用于生成/保持逻辑名。
  - 提供 `replaceRowImageName(rows, oldName, newName)`，批量替换 Excel/飞书解析数据中的封面/配图引用。
- 样式：`src/styles/app.css`
  - 增加网格样式 `.thumb-grid`、`.thumb-item`，限制缩略图尺寸与溢出处理。
- 安全与 CSP：`img-src` 需要允许 `blob:`
  - 更新 `src/index.html` 的 CSP：`img-src 'self' blob: data:`，保证缩略图可显示。

## 验证
- 上传 3 张图片显示缩略图；删除 1 张后，预览缺失计数增加。
- 替换保持逻辑名不变，预览不出现缺失；选择“更新引用为新文件名”，预览中旧名消失、新名匹配。
- 内存管理：替换/删除时调用 `URL.revokeObjectURL`，避免泄漏。

## 变更范围
- 仅改动前端视图/工具与 CSP；不影响 IPC 与数据库。

确认后我将开始实现：在 `autopublish` 视图增加缩略图网格与替换/删除操作，完善工具与样式，并调整 CSP 支持 `blob:` 预览。