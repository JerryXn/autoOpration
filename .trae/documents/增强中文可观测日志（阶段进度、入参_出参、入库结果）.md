## 目标
- 输出“有实际意义的中文日志”，可清晰掌握：当前运行阶段 → 执行动作 → 关键说明 → 请求入参 → 响应出参 → 入库结果。
- 统一为结构化 JSON 中文键，便于筛选与检索；主进程按状态着色显示。

## 日志规范（结构化 JSON 中文键）
- 顶层字段：
  - 类型：信息/浏览器/接口/数据库/错误
  - 阶段：启动/认证/搜索/分页/详情/评论/AI调用/回复/入库
  - 动作：开始/请求/响应/筛选/点击/提交/入库开始/入库成功/入库失败
  - 说明：简短中文说明（例如：已获得搜索页第1页数据、准备回复评论...）
  - 入参：关键入参快照（脱敏显示 Authorization，仅打印长度与前后缀；payload 仅前 N 字符）
  - 返回：关键返回快照（HTTP 状态、文本头、JSON 关键字段如 chat_id/conversation_id）
  - 标识：关联标识（note_id、comment_id、keyword、page、cursor、reply_id 等）
- 主进程映射状态着色：
  - 信息/入库成功 → 绿；开始/请求/响应 → 蓝；警告 → 黄；错误/入库失败 → 红

## 输出示例
- 接口请求
  - { 类型:"接口", 阶段:"AI调用", 动作:"请求", 说明:"准备请求 Coze 接口", 入参:{ url, headers:{ Authorization:"Bearer ****(len=75)" }, payload_head:"{...}" }, 标识:{ keyword, note_id } }
- 接口响应
  - { 类型:"接口", 阶段:"AI调用", 动作:"响应", 说明:"收到 Coze 响应", 返回:{ status:200, text_head:"{\"code\":0,...}" }, 标识:{ chat_id, conversation_id } }
- 回复动作
  - { 类型:"浏览器", 阶段:"回复", 动作:"提交", 说明:"已点击回复并提交内容", 标识:{ note_id, comment_id }, 入参:{ content_head:"前100字符" }, 返回:{ status:200, text_head:"..." } }
- 入库结果
  - { 类型:"数据库", 阶段:"入库", 动作:"入库成功", 说明:"评论回复记录入库成功", 标识:{ reply_id, note_id, comment_id } }
  - { 类型:"数据库", 阶段:"入库", 动作:"入库失败", 说明:"插入失败", 返回:{ error:"唯一键冲突" }, 标识:{ note_id, comment_id } }

## 覆盖范围与具体落点
- Python：
  - src/invoke/remote_invoke.py：
    - 在 HTTP 请求前打印“接口/AI调用/请求”中文日志（脱敏 Authorization；payload_head 截断）
    - 在 HTTP 响应后打印“接口/AI调用/响应”中文日志（status、text_head 截断、chat_id/conversation_id）
  - src/invoke/comment_pipeline.py：
    - 评论筛选阶段：打印“信息/评论/筛选”包含 raw/cleaned 前 N 字与 keep 标志
    - 回复阶段：打印“浏览器/回复/提交”（content_head、status、text_head），随后打印“数据库/入库开始/入库成功/入库失败”（reply_id、note_id、comment_id）
    - 远程返回 false 路径：同样入库（status=skipped）并打印“入库成功/失败”
  - src/storage/xhs_repo_mysql.py：
    - store_comment_reply/store_comment_reply_response 完成后打印“数据库/入库成功”；捕获异常时打印“数据库/入库失败+错误”
- 主进程：
  - src/main.js：
    - 保留凭据健康检查与掩码日志（中文说明：已检测到 COZE_TOKEN/COZE_BOT_ID）
    - 彩色映射：基于 status→中文标签输出（信息/开始/成功/警告/错误），按“类型/阶段/动作”显示行首标签

## 验证
- 运行一次，观察关键阶段的中文日志：AI 请求→响应→回复提交→入库成功；若失败，错误中文日志包含具体原因。
- 在 auto_final 库中查询：xhs_comment_replies/xhs_comment_reply_responses 有新增记录且 reply_id 对应日志。

## 交付
- 修改上述 Python 文件与主进程日志映射，保证端到端的中文结构化日志；不引入阻塞模式，流程自行运行到底。