## 测试范围
- 端点解析：验证每个 docId 的文档页能解析出 API 路径
- 接口调用：使用 `.env` 的 `API_KEY` 发起真实 GET（存在网络依赖，失败时给出可读断言）
- 数据规范化：统一输出结构 `{"name","url","heat","time"}`，校验字段完整与热度解析
- 聚合与去重：`fetch_all(docIds)` 合并并按 `url/name` 去重

## 覆盖的文档 ID
- 85、83、75、60、61、62、15、18、13、14、17、58、63

## 用例清单
- test_resolve_endpoint: 对上述 docIds，`_resolve_endpoint_from_doc(docId)` 返回非空路径
- test_call_by_doc_smoke: `call_by_doc(85)` 返回 `dict/list`，包含可被适配的数据结构
- test_normalize_xhs_hot: 以构造数据验证 `viewnum` 单位解析（如 `1100.9w`→数值）、`name/url/time` 映射正确
- test_normalize_generic: 通用字段映射（`title|name`、`url|link`、`hot|pv|viewnum`、`date|publish_time|time`）
- test_fetch_all_aggregate: 传入多个 docIds，返回统一列表且按 `url/name` 去重
- test_requires_api_key: 缺少 `API_KEY` 时调用返回错误对象或空列表，断言健壮性

## 技术实现
- 测试框架：pytest
- 结构：
  - `auto_opration_python/tests/test_itapi_client.py`
  - 使用 `monkeypatch` 注入 `.env` 的 `API_KEY`
  - 为规范化测试提供本地样例数据（不依赖网络）
  - 为端点解析与接口调用提供集成测试，设置合理超时与断言
- 断言要点：
  - 端点解析：非空且形如 `hotnews/xiaohongshu` 等相对路径
  - 统一项：存在 `name`、`url`，`heat` 为数值或字符串，`time` 为字符串
  - 去重：同一 `url` 或同名的仅保留一条

## 运行方式
- 本地：`pytest -q auto_opration_python/tests/test_itapi_client.py`
- 依赖：仓库根 `.env` 中设置 `API_KEY=...`

## 交付
- 新增测试文件与样例数据
- 所有用例通过后，输出简要测试报告（用例数、通过/失败统计）