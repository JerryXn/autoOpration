## 目标
- 为“图文”类型（note_type=2）生成包含排序、发布时间、搜索范围、位置距离的搜索请求体，并验证字段映射正确。
- 覆盖排序5种、发布时间4种、搜索范围4种、位置距离3种组合的校验（以笛卡尔乘积或分组采样）。

## 设计
- 抽取请求体构造为可测试的纯函数：`build_search_body(keyword, page, page_size, filters, base_body, cfg)`。
- 该函数按你提供的 curl 结构生成：
  - 顶层：`keyword/page/page_size/search_id/sort:"general"/note_type/ext_flags:[]/filters/geo/image_formats`
  - note_type：图文→2
  - filters：
    - `{type:"sort_type", tags:[sortBy]}`
    - `{type:"filter_note_time", tags:[publishTime]}`
    - `{type:"filter_note_range", tags:[scope]}`
    - `{type:"filter_pos_distance", tags:[distance]}`
  - geo：优先使用 `base_body.geo`；无则从 `cfg.browser.context_options.geolocation` 或环境注入（保持与现有 `_build_geo` 一致）。

## 测试用例
- 排序：`general/time_descending/popularity_descending/comment_descending/collect_descending`
- 发布时间：`不限/一天内/一周内/半年内`
- 搜索范围：`不限/已看过/未看过/已关注`
- 位置距离：`不限/同城/附近`
- 用例结构：
  - 基础用例：图文 + 综合 + 不限时间 + 不限范围 + 不限距离
  - 组合用例：针对每一维枚举验证 `filters` 中相应 `type` 的 `tags` 精确匹配；`note_type==2`；`sort=="general"`；`image_formats` 保留；`geo` 非空（当 cfg/geolocation 可用时）

## 实施
- 新增模块：`auto_opration_python/src/automation/services/search_body.py`（实现 `build_search_body`）。
- 新增单元测试：`auto_opration_python/tests/test_search_filters.py`（基于 `unittest`）。
  - 构造 `cfg`（含 `browser.context_options.geolocation`）和 `base_body`（含 `search_id` 等）
  - 遍历组合，调用 `build_search_body`，断言：
    - 顶层字段存在且值正确
    - `filters` 数组包含四个 `type`，且各自的 `tags` 等于输入值（中文标签）
    - `note_type==2`
    - `sort=="general"`
    - `image_formats` 正确
    - `geo` 按配置注入（或允许为空时不注入）

## 日志与可视化
- 在测试断言失败时输出差异（预期 vs 实际），易于定位。

## 验证
- 本地运行 `python -m unittest auto_opration_python/tests/test_search_filters.py`，看到所有组合断言通过。