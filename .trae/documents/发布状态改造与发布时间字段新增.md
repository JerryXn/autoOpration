## 目标
- Tab 修改：将“自动发布”改为“发布列表”，新增 Tab “任务设置”。
- 任务设置：支持配置多个时间段，每段含“数量”和“时间间隔”，在指定时间段内按配置从“发布列表”中发布素材。
- 首期发布动作：先实现数据库层面的发布（状态改为已发布、写入发布时间），后续可接入真实平台发布。

## 数据库与数据模型
- 表 `parsed_contents`：
  - 保留现有结构，增加展示逻辑将 `status` 映射为“是否发布”，继续使用 `published_at`（若未添加，将一并迁移新增）。
- 新增表 `publish_schedules`：
  - 字段：`id`, `user_id`, `platform_code`, `slots_json`, `created_at`, `updated_at`
  - `slots_json` 结构：数组，每项 `{ start: 'HH:mm', end: 'HH:mm', count: number, intervalSeconds: number }`
  - 建索引：`user_id + platform_code`
- 启动自动迁移：不存在时创建新表；`parsed_contents` 若缺 `published_at` 列则添加。

## 后端接口
- `get-publish-schedules(platformCode)`: 读取当前用户该平台的定时配置。
- `save-publish-schedules(platformCode, slots)`: 保存一组时间段配置。
- `mark-published(id)`: 设置 `status='published'`, `published_at=NOW()`。
- 任务调度器（进程内服务）：
  - 每分钟检查一次当前时间与各平台配置；
  - 若当前时间落入某时间段，按 `count` 和 `intervalSeconds` 节律，从 `parsed_contents` 中取未发布内容并依次发布（调用 `mark-published`）。
  - 保障同一时间段内不重复触发：使用内存节流与数据库检查（看 `published_at` 是否已写入）。

## 前端改造
- Tab 与视图：
  - 将“自动发布”Tab 文本替换为“发布列表”。
  - 新增 Tab “任务设置”，对应新 Pane。
- 发布列表：
  - 表头维持不变或改为“是否发布/发布时间”；仍按平台过滤与分页，滚动布局不变。
- 任务设置 UI：
  - 列表展示已配置的时间段；每项字段：起始时间（`HH:mm`）、结束时间（`HH:mm`）、数量、时间间隔（秒/分钟）。
  - 支持新增/删除时间段、保存配置。
  - 校验：时间格式、范围、数量为正整数、时间间隔合理（>0）。

## 交互流程
1. 用户在平台页进入“发布列表”，查看未发布/已发布与发布时间。
2. 切到“任务设置”，配置多个时间段并保存。
3. 后端调度器按配置推进将未发布内容标记为已发布，并写入发布时间；前端刷新列表可看到变化。

## 兼容与扩展
- 现阶段“发布”动作仅标记数据库，后续可在每次发布调用平台 API；接口留钩子。
- `slots_json` 可扩展平台特定策略（优先级、并发上限等）。

## 测试与验证
- 单元测试：保存/读取时间段配置；调度器在模拟时间内按 `count` 与 `intervalSeconds` 生成发布记录；列表正确显示“是否发布/发布时间”。
- 手动验证：配置多个时间段→观察列表随时间变化被发布。

## 实施顺序
1. 自动迁移：新增 `publish_schedules` 表（含索引）；`parsed_contents` 确保 `published_at` 存在。
2. 后端 IPC：读取/保存任务设置；发布标记接口；调度器服务。
3. 前端：Tab 改名与新增 Pane；任务设置编辑与校验；列表展示字段更新。
4. 测试与联调。

请确认：
- 时间段的“时间间隔”单位使用秒还是分钟（推荐秒，UI可输入分钟再转换）。
- 发布策略按 `count` 总量控制（每时间段最多发布 N 条）是否符合需求？
- 是否需要在列表中“手动发布/取消发布”按钮作为补充操作？