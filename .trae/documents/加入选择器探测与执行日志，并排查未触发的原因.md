## 排查要点
- 验证参数链路：前端勾选 → 主进程 args → Python 解析 `DO_LIKE/DO_FAV`
- 验证执行路径：搜索页 → 打开详情页 → 触发 `perform_like/perform_collect`
- 排除全局阻断：`run.dry_run` 是否为 true（将导致动作不执行）

## 日志与代码改动
### 主进程参数打印
- 在点击“执行”时打印：
  - `[start-auto-op-payload]` 原始 `payload`
  - `[start-auto-op-params]` 汇总 `{ actions, limits, filters, uid, perms }`
  - `[start-auto-op-env]` `{ USER_DATA_DIR, XHS_SEARCH_FILTERS_JSON, XHS_ACTION_POLICIES_JSON }`

### Python参数解析与详情页日志
- 解析后打印 `{"case":"args_parsed","like":...,"fav":...,"record":...,"user_id":...}`
- 打开详情页时打印：
  - `{"case":"detail_open","note_id":...,"url":...}`
  - 结构化事件：`logger.event("xhs_main","nav","detail_open","info",{note_id,url})`

### 选择器探测与执行日志（核心）
- 点赞探测：`like_probe` 打印每个选择器的 `locator.count()` 结果
- 点赞结果：`like_result` 打印 `ok/before/after/tried/selected/screenshot`
- 收藏探测：`collect_probe` 同上
- 收藏结果：`collect_result` 同上
- 同步结构化事件：`logger.event("xhs_main","action","like|collect","info",{ tried, counts, selected, screenshot, before, after })`
- 截图：保存到 `artifacts/action_like.png`、`artifacts/action_collect.png`

### 兜底选择器与加载等待
- 增加更宽松选择器：
  - 点赞：`button:has-text("赞")`、`[aria-label*="赞"]`
  - 收藏：`button:has-text("收藏")`、`[aria-label*="收藏"]`
- 在详情页先 `wait_for_selector`（如主容器）再进行探测与点击

### dry_run 阻断提示
- 若 `cfg.run.dry_run==true`，打印结构化事件 `logger.event("xhs_main","action","skip","warn",{ reason:"dry_run" })` 并跳过动作；支持环境变量覆盖（如 `RUN_DRY=0`）

## 验证方式
- `npm start` 后勾选点赞/收藏执行，终端必须出现：
  - `[start-auto-op-payload]`、`[start-auto-op-params]`、`[start-auto-op-env]`
  - `{"case":"args_parsed",...}`、`{"case":"detail_open",...}`
  - `{"case":"like_probe",...}` 与 `{"case":"like_result",...}`；收藏同理
  - 截图文件生成在 `artifacts/`
- 如 `counts` 全为 0，则确认页面样式未命中，使用兜底选择器并在日志中看到重试记录

## 交付
- 完成上述代码改动与日志接入
- 提供 grep 关键字：`like_probe|collect_probe|like_result|collect_result|detail_open|args_parsed`
- 如启用记录，数据库中 `op_action_logs` 出现对应动作与 `page_url`