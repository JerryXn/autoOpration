## 目标
- 代码层面实现“默认自动流程”：无需你逐步操作，系统自动用默认选择器执行到“首篇→打印”。你仅控制开始/暂停/继续/重试/跳过/改关键词。

## 变更文件
- `src/playwright/runner.js`：执行器（核心改造）
- `src/playwright/index.js`：绑定与注入（新增命令、导航重注入）
- `src/playwright/overlay.js`：最小控制按钮（开始/暂停/继续/重试/跳过）与进度显示
- `src/autoop/selectors.js`：默认选择器集合（保留来源，必要时补充）

## runner.js 改造
- 新增方法
  - `startFlow()`: 从 `search_focus` 自动推进至 `browse_detail`，内部调用 `runStep()` 按队列自动循环
  - `pauseFlow()/resumeFlow()`: 切换 `st.paused`
  - `retryStage()`: 重新构建当前阶段队列并执行
  - `skipStage()`: 直接调用 `nextStage()` 进入下一阶段并执行
  - `setKeyword(kw)`: 更新关键词
- 默认选择器优先
  - 在 `query_selector/query_selector_next/program_click/search_click` 中构造候选：`[用户覆盖] + 默认集合`，逐项尝试并校验可见性；成功即落地“实际使用的选择器”并回传日志
  - `search_click`：默认失败时，确保焦点在输入框后发送 `Enter`
  - `browse_list/open_next_item`：默认失败时轻微滚动（`page.mouse.wheel` 或 `page.evaluate(window.scrollBy)`）后重试一次
  - `open_item`：坐标点击失败回退 `elementHandle.click()`
- 自动推进与循环
  - 完成队列后按状态机 `search_focus→search_input→search_click→browse_list→open_item→browse_detail→back_to_list→open_next_item` 推进；遇受限页自动走回退链路
- 失败诊断（仅必要时）
  - 返回 `{stage, action, reason, selector, defaults, tried, matchCount, url}` 到浮窗；成功时显示“已用默认选择器: <selector>”

## index.js 改造
- `page.exposeBinding('autoopNative', ...)` 新增命令：
  - `startFlow`, `pauseFlow`, `resumeFlow`, `retryStage`, `skipStage`, `setKeyword`
- 导航/SPA 重注入：`framenavigated`/`load` 事件下检查并重注入 overlay 与绑定

## overlay.js 改造
- 新增最小控制按钮：开始流程/暂停/继续/重试当前阶段/跳过当前阶段；关键词输入框保留
- 进度显示：当前阶段与动作、使用选择器（若为默认则标注“默认”）
- 失败诊断面板仅在默认集合全部失败时显示（含候选与匹配数），支持一键填充后重试

## 验证
- 运行 `npm run pw:open -- --plat xhs`
- 浮窗“关键词”→“开始流程”即可自动到“首篇→打印”；只在默认失效时显示诊断并允许覆盖
- 控制台输出 `[pw-step]`，最终打印 `[NOTE] { id, url, title, author, text, images, videos }`

## 交付准则
- 默认流程一键运行，无需逐步操作
- 失败提示只在必要时出现，包含可操作候选
- 绑定与注入在导航切换后仍有效