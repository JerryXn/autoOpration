# 创建独立的搜索与筛选测试任务

我们将在不触碰主脚本的情况下，创建一个独立的测试脚本来验证搜索和筛选功能。

## 1. 更新配置文件 `scripts/xiaohongshu/config.json`
新增 `filter` 配置段，定义筛选规则。

```json
{
  ...
  "filter": {
    "enabled": true,
    "sort": "最新",
    "type": "图文",
    "time": "半年内",
    "scope": "不限",
    "distance": "不限"
  }
}
```

## 2. 创建测试任务 `scripts/test_filter/index.js`
这将是一个标准的 Playwright 任务脚本，包含以下逻辑：
1.  **初始化**：读取配置，访问小红书 Explore 页面，执行登录检查。
2.  **搜索流程**：
    - 定位并点击搜索框。
    - 输入配置中的关键词（`config.search.keyword`）。
    - 点击搜索按钮。
3.  **筛选流程**（核心新功能）：
    - 点击“筛选”按钮打开面板。
    - **智能匹配点击**：遍历配置的 filter 字段，使用正则 `^内容$` 精确匹配并点击对应的筛选项（如“最新”、“图文”）。
    - 点击“收起”完成筛选。
4.  **暂停验证**：脚本执行完后暂停，供您目视检查筛选结果是否正确。

## 3. 运行验证
您将通过以下命令运行此独立任务：
`npm run cli -- run test_filter`